CompileFlags:
  # Rely on compile_commands.json for the driver.
  # If no build folder is found, these flags provide a safe fallback.
  Add:
    [
      -std=c++20,
      -Wall,
      -Wextra,
      -Wconversion,
      -Wsign-conversion,
      -Wshadow,
      -Wnon-virtual-dtor,
    ]
  # Remove older standards to prevent conflicts
  Remove:
    [
      -std=c++98,
      -std=c++03,
      -std=c++11,
      -std=c++14,
      -std=c++17,
      -pedantic-errors,
    ]

Index:
  Background: Build
  StandardLibrary: Yes

Diagnostics:
  UnusedIncludes: Strict
  MissingIncludes: Strict

  ClangTidy:
    Add:
      [
        "bugprone-*",
        "modernize-*",
        "performance-*",
        "misc-*",
        "readability-*",
        "cppcoreguidelines-*",
      ]
    Remove: [
        # Formatting/Style checks (let clang-format handle style)
        "readability-braces-around-statements",
        "readability-identifier-length",
        "modernize-use-trailing-return-type",
        "modernize-use-nodiscard",

        # Noise reduction (often false positives in standard code)
        "cppcoreguidelines-pro-bounds-*",
        "cppcoreguidelines-pro-type-*",
        "cppcoreguidelines-avoid-magic-numbers",
        "readability-magic-numbers",
        "bugprone-easily-swappable-parameters",
      ]
    CheckOptions:
      # High complexity functions are hard to maintain; this warns if logic is too deep
      readability-function-cognitive-complexity.Threshold: 25

InlayHints:
  Enabled: Yes
  ParameterNames: Yes
  DeducedTypes: Yes
  Designators: Yes
  BlockEnd: Yes

Hover:
  ShowAKA: Yes

Completion:
  AllScopes: Yes
